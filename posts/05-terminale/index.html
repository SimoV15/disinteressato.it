<!doctype html><html lang=it-it>
<head>
<meta charset=utf-8>
<meta name=generator content="Hugo 0.92.2">
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=author content>
<meta property="og:url" content="https://disinteressato.it/posts/05-terminale/">
<title>Un Terminale è per sempre (e altre cosette) - Disinteressato</title>
<meta property="og:title" content="Un Terminale è per sempre (e altre cosette) - Disinteressato">
<meta property="og:type" content="article">
<meta name=description content="Terminale,macOS">
<link rel=stylesheet href=https://disinteressato.it/css/fonts.css>
<link rel=stylesheet href=https://disinteressato.it/css/style.css>
<link rel=apple-touch-icon sizes=180x180 href=https://disinteressato.it/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=https://disinteressato.it/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=https://disinteressato.it/favicon-16x16.png>
<link rel=manifest href=https://disinteressato.it/site.webmanifest>
<link rel=mask-icon href=https://disinteressato.it/safari-pinned-tab.svg color=#262626>
<meta name=msapplication-TileColor content="#3dbda4">
<link rel=stylesheet href=https://disinteressato.it/css/syntax-dark.css media="(prefers-color-scheme: dark)">
<link rel=stylesheet href=https://disinteressato.it/css/syntax-light.css media="(prefers-color-scheme: light)">
</head>
<body>
<div class=container>
<nav class=site-nav>
<a href=https://disinteressato.it/><span class=header-svg><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="home" class="svg-inline--fa fa-home fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentcolor" fill="currentcolor" d="M280.37 148.26 96 300.11V464a16 16 0 0016 16l112.06-.29a16 16 0 0015.92-16V368a16 16 0 0116-16h64a16 16 0 0116 16v95.64a16 16 0 0016 16.05L464 480a16 16 0 0016-16V3e2L295.67 148.26a12.19 12.19.0 00-15.3.0zM571.6 251.47 488 182.56V44.05a12 12 0 00-12-12h-56a12 12 0 00-12 12v72.61L318.47 43a48 48 0 00-61 0L4.34 251.47a12 12 0 00-1.6 16.9l25.5 31A12 12 0 0045.15 301l235.22-193.74a12.19 12.19.0 0115.3.0L530.9 301a12 12 0 0016.9-1.6l25.5-31a12 12 0 00-1.7-16.93z"/></svg></a>
</nav>
<article class=post>
<header class=post-header>
<h1 class=post-title>Un Terminale è per sempre (e altre cosette)</h1><time class=post-date datetime=2021-12-28T00:00:00Z>28 dicembre 2021</time></header>
<p>Quando a metà anni 2000 iniziai ad usare un Mac il <a href=https://it.m.wikipedia.org/wiki/Terminale_virtuale>terminale</a> proprio non me lo filavo.</p>
<p>In quell&rsquo;era geologica c&rsquo;era ancora la sbornia evolutiva portata dall&rsquo;aumento esponenziale e costante della potenza dei processori con interfacce sempre più belle e ricche di funzionalità, quindi fare un passo indietro ed usare il terminale non era contemplato.<br>
E poi venivo da Windows e il <em>Prompt dei comandi</em> neanche sapevo cosa fosse.</p>
<p>Col tempo ho apprezzato l&rsquo;uso che se ne può fare, come possa essere effettivamente più rapido per alcune operazioni, inutilmente complesso per altre, ma soprattutto che è l&rsquo;ultima ancora di salvezza per uscire dai guai nei sistemi <a href=https://it.wikipedia.org/wiki/Unix>Unix</a>.</p>
<p>Ritenendomi adesso un utente discretamente esperto, almeno nel riconoscere le mie necessità, il mio approccio in questo nuovo viaggio con macOS è stato questo: cerco tutto il software che mi serve nell&rsquo;App Store, se non lo trovo la scarico dai rispettivi siti ufficiali e verifico che ci sia la possibilità di ricercare gli aggiornamenti all&rsquo;interno dell&rsquo;applicazione stessa.</p>
<p>Queste sono le applicazioni che ho installato esternamente all&rsquo;App Store:</p>
<ul>
<li><a href=https://code.visualstudio.com>Virtual Studio Code</a></li>
<li><a href=https://www.office.com>Microsoft Office</a> con licenza Office 2021 acquistata su <a href=http://topkeyshop.com>Top Key Shop</a></li>
<li><a href=https://www.tug.org/mactex/>MacTex</a></li>
<li><a href=https://calibre-ebook.com>Calibre</a></li>
<li><a href=https://iina.io>IINA</a></li>
<li><a href=https://handbrake.fr>HandBrake</a></li>
<li><a href=https://transmissionbt.com/>Transmission</a></li>
<li><a href=https://www.torproject.org>Tor Browser</a></li>
<li><a href=https://freemacsoft.net/appcleaner/>App Cleaner</a></li>
</ul>
<p>Ho lasciato alla riga di comando le operazioni che possono essere svolte esclusivamente da terminale oppure quelle per le quali mi sento più a mio agio ad utilizzarlo.</p>
<p>Con macOS la prima cosa da fare è installare <a href=https://brew.sh/index_it>Homebrew</a>, un gestore di pacchetti col quale scaricare, installare e mantenere aggiornato del software rigorosamente <a href=https://it.wikipedia.org/wiki/Open_source>open source</a>: in pratica è una specie di App Store da linea di comando.<br>
Anche l&rsquo;installazione, ovviamente, avviene da riga di comando:</p>
<pre tabindex=0><code class=language-default data-lang=default>$ /bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;
</code></pre><p>Piccolo extra, disattivare il monitoraggio di <a href=https://docs.brew.sh/Analytics>Homebrew Analytics</a>:</p>
<pre tabindex=0><code class=language-default data-lang=default>$ brew analytics off
</code></pre><p>Invece, per aggiornare i pacchetti installati basteranno poi i seguenti comandi:</p>
<pre tabindex=0><code class=language-default data-lang=default>$ brew update
$ brew outdated
$ brew upgrade
</code></pre><p>Ho installato veramente pochi pacchetti perché quello di cui necessito è residuale o al massimo serve per estendere o completare alcune funzioni di macOS.</p>
<h4 id=caratteri>Caratteri</h4>
<p>Ho installato solo il carattere <a href=https://fonts.google.com/specimen/Roboto>Roboto</a>, lo stesso che uso anche in questo sito:</p>
<pre tabindex=0><code class=language-default data-lang=default>$ brew tap homebrew/cask-fonts
$ brew install svn
$ sudo mkdir -p /Library/Java/Extensions
$ sudo ln -s /opt/homebrew/lib/libsvnjavahl-1.dylib /Library/Java/Extensions/libsvnjavahl-1.dylib
$ brew install --cask font-roboto font-roboto-mono font-roboto-slab
</code></pre><h4 id=micro>micro</h4>
<p>Mi trovo bene con <a href=https://micro-editor.github.io>micro</a>, facile da usare e completo.</p>
<pre tabindex=0><code class=language-default data-lang=default>$ brew install micro
$ micro ~/.zshrc
export MICRO_TRUECOLOR=1
$ micro ~/.config/micro/settings.json
{
    &quot;autosu&quot;: &quot;true&quot;,
    &quot;colorscheme&quot;: &quot;simple&quot;,
    &quot;diffgutter&quot;: true,
    &quot;mkparents&quot;: true,
    &quot;relativeruler&quot;: true,
    &quot;rmtrailingws&quot;: true
}

</code></pre><p>Infine spuntare l&rsquo;opzione <em>Utilizza il tasto Opzione come Meta</em> nelle preferenze del Terminale predefinito in macOS:<br>
<em>Preferenze -> Profili -> Tastiera -> Utilizza il tasto Opzione come Meta</em></p>
<h4 id=quick-look>Quick Look</h4>
<p>Per estendere le funzionalità di <a href=https://en.wikipedia.org/wiki/Quick_Look>Quick Look</a> ho installato questi due plugins: <a href=https://github.com/sbarex/QLMarkdown>QLMarkdown</a> permette di visualizzare il formato <a href=https://it.wikipedia.org/wiki/Markdown>markdown</a>, mentre <a href=https://github.com/Marginal/QLVideo>QLVideo</a> aggiunge il supporto ad altri formati video.</p>
<pre tabindex=0><code class=language-default data-lang=default>$ brew install --cask qlmarkdown
$ brew install --cask qlvideo
</code></pre><h4 id=youtube-dl>youtube-dl</h4>
<p>Immancabile <a href=https://youtube-dl.org>youtube-dl</a> per scaricare i video da <a href=https://www.youtube.com>YouTube</a>:</p>
<pre tabindex=0><code class=language-default data-lang=default>$ brew install youtube-dl atomicparsley ffmpeg
</code></pre><p>Questo invece è il mio file di configurazione:</p>
<pre tabindex=0><code class=language-default data-lang=default>$ nano ~/.config/youtube-dl/config
--embed-thumbnail
--add-metadata
--no-mtime
-o /Users/&lt;USER&gt;/Movies/%(title)s.%(ext)s
-f 'bestvideo[ext=mp4]+bestaudio[ext=m4a]/best[ext=mp4]/best'
</code></pre><h4 id=exiftool>ExifTool</h4>
<p><a href=https://exiftool.org>ExifTool</a> mi ha tolto dagli impicci di dover inserire i <a href=https://it.wikipedia.org/wiki/Metadato>metadati</a> (nello specifico: data e ora) alle circa 1700 foto scattate dal fotografo al mio matrimonio:</p>
<pre tabindex=0><code class=language-default data-lang=default>$ brew install exiftool
</code></pre><p>Fortunatamente i file erano stati nominati in ordine cronologico crescente di scatto, quindi mi è bastato dapprima inserire in tutte le foto la stessa data e la stessa ora (<code>DIR</code> è il nome della cartella che contiene i file):</p>
<pre tabindex=0><code class=language-default data-lang=default>$ exiftool -AllDates=&quot;YYYY:MM:DD HH:MM:SS&quot; DIR -overwrite_original -r
</code></pre><p>Dopodiché ad ogni foto, in base all&rsquo;ordine crescente di nome, sono stati aggiunti 10 secondi all&rsquo;ora di scatto rispetto a quella della precedente, il tutto con questo unico comando:</p>
<pre tabindex=0><code class=language-default data-lang=default>$ exiftool '-AllDates+&lt;0:0:${filesequence}0' DIR -fileOrder FileName -overwrite_original -r
</code></pre><p>Per verificare che la modifica sia stata effettuata correttamente, questo comando genera un file <a href=https://it.wikipedia.org/wiki/Comma-separated_values>CSV</a> facilmente analizzabile:</p>
<pre tabindex=0><code class=language-default data-lang=default>$ exiftool -AllDates -csv DIR &gt; out.csv
</code></pre><p>In questo modo, una volta aggiunte alla libreria di <a href=https://www.apple.com/it/macos/photos/>Foto</a>, erano in perfetto ordine cronologico (ovviamente l&rsquo;ora di scatto era arbitraria e non rispettava quella effettiva, ma di meglio non si poteva fare).</p>
<h4 id=zsh>ZSH</h4>
<p>Ed infine, visto che macOS utilizza <a href=https://zsh.sourceforge.io>ZSH</a> come <a href=https://it.wikipedia.org/wiki/Shell_(informatica)>shell</a> di default, perché non personalizzarla un pochino?</p>
<pre tabindex=0><code class=language-default data-lang=default>$ cd ~
$ touch ~/.hushlogin
$ micro .zshrc
alias \$=''
alias \%=''
alias ls='ls --color=auto'
alias grep='grep --color=auto'
alias fgrep='fgrep --color=auto'
alias egrep='egrep --color=auto'
alias ll='ls -lh'
alias la='ls -lah'
alias ..='cd ..'
alias l='ls -na'
alias ll='ls -al'
alias gh='cd ~'
alias rm=&quot;rm -rf&quot;
alias edit='micro'
setopt NO_CASE_GLOB
setopt AUTO_CD
setopt EXTENDED_HISTORY
HISTFILE=~/.zsh_history
HISTSIZE=50000
SAVEHIST=10000
setopt SHARE_HISTORY
setopt inc_append_history
setopt auto_cd
setopt histignoredups
setopt ignoreeof
unsetopt flowcontrol
setopt correct_all
autoload -U colors &amp;&amp; colors
export SPROMPT=&quot;Correct $fg_bold[red]%R$reset_color to $fg_bold[green]%r?$reset_color ($fg_bold[green]Yes$reset_color, $fg_bold[yellow]No$reset_color, $fg_bold[red]Abort$reset_color, $fg_bold[blue]Edit$reset_color) &quot;
plugins=(zsh-completions)
autoload -Uz compinit
compinit
zstyle ':completion:*' menu select
setopt list_rows_first
setopt glob_complete
zstyle ':completion:*' list-colors &quot;${(s.:.)LS_COLORS}&quot;
autoload -Uz vcs_info
PROMPT='%(?.%F{green}√.%F{red}?%?)%f %B%F{cyan}%1~%f%b %F{white}%#%f '
precmd_vcs_info() { vcs_info }
precmd_functions+=( precmd_vcs_info )
setopt prompt_subst
RPROMPT=\$vcs_info_msg_0_
zstyle ':vcs_info:git:*' formats '%F{yellow}(%b)%r%f'
zstyle ':vcs_info:*' enable git
mkcd() { mkdir &quot;$1&quot;; cd &quot;$1&quot;; }
export LESS_TERMCAP_md=$(tput bold; tput setaf 1)
export LESS_TERMCAP_me=$(tput sgr0)
export LESS_TERMCAP_mb=$(tput bold; tput setaf 2)
export LESS_TERMCAP_us=$(tput bold; tput setaf 2)
export LESS_TERMCAP_ue=$(tput rmul; tput sgr0)
export LESS_TERMCAP_so=$(tput bold; tput setaf 3; tput setab 4)
export LESS_TERMCAP_se=$(tput rmso; tput sgr0)
export LESS=-R
export EDITOR=micro
export VISUAL=&quot;$EDITOR&quot;
$ source .zshrc
</code></pre><p>Si potrebbe fare molto di più, ma per il mio approccio questo è già abbastanza per avere tutto ciò di cui necessito razionalmente installato.</p>
<p>Adesso sì che mi sento a casa!</p>
</article>